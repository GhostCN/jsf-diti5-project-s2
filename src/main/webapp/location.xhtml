<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
<h:head>
	<title>Home </title>
	<!--HEADER CSS-->
	<ui:insert name = "header" >
		<ui:include src = "fragments/header.xhtml" />
	</ui:insert>
	<!--HEADER CSS-->

</h:head>
<h:body>
	<!--NAV-->
	<ui:insert name = "nav" >
		<ui:include src = "fragments/nav.xhtml" />
	</ui:insert>
	<!--NAV-->


	<!--CONTENT-->
	<div class="container">
		<h2 class="h3 text-right">Location </h2>

		<h:form styleClass="form" id="frmlocationAdd">
			<fieldset>
				<legend>
					Information Client
				</legend>
				<div class="form-group row">
					<label for="numpiece" class="col-sm-2 col-form-label">Numero piece</label>
					<div class="col-sm-10">
						<h:inputText id="numpiece" required="true" value="#{locationBean.location.idclient.numpiece}" a:placeholder="Numero piece"  styleClass="form-control" >
						<f:validateRequired />
							<f:ajax event="change" listener="#{locationBean.getclient()}" render=":frmlocationAdd:prenom :frmlocationAdd:nom :frmlocationAdd:adresse :frmlocationAdd:tel :frmlocationAdd:email" />
						</h:inputText>
					</div>
				</div>
				<div class="form-group row">
					<label for="prenom" class="col-sm-2 col-form-label">Prenom</label>
					<div class="col-sm-10">
						<h:inputText id="prenom" required="true" value="#{locationBean.location.idclient.prenom}" a:placeholder="Prenom"  styleClass="form-control" />
					</div>
				</div>
				<div class="form-group row">
					<label for="nom" class="col-sm-2 col-form-label">Nom</label>
					<div class="col-sm-10">
						<h:inputText id="nom" required="true" value="#{locationBean.location.idclient.nom}"  styleClass="form-control"  a:placeholder="Nom" />
					</div>
				</div>

				<div class="form-group row">
					<label for="adresse" class="col-sm-2 col-form-label">Adresse</label>
					<div class="col-sm-10">
						<h:inputText id="adresse" required="true" value="#{locationBean.location.idclient.adresse}" a:placeholder="Adresse" styleClass="form-control" />
					</div>
				</div>
				<div class="form-group row">
					<label for="tel" class="col-sm-2 col-form-label">Telephone</label>
					<div class="col-sm-10">
						<h:inputText id="tel" required="true" value="#{locationBean.location.idclient.tel}" onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;" a:placeholder="Telephone"  styleClass="form-control" />
					</div>
				</div>
				<div class="form-group row">
					<label for="email" class="col-sm-2 col-form-label">Email</label>
					<div class="col-sm-10">
						<h:inputText id="email" value="#{locationBean.location.idclient.email}" a:placeholder="Email" required="true"  type="email" styleClass="form-control" />
					</div>
				</div>
			</fieldset>
			
			<fieldset>
				<legend>
					Information Voiture
				</legend>
				<div class="form-group row">
					<label for="matricule" class="col-sm-2 col-form-label">Marticule</label>
					<div class="col-sm-10">
						<h:inputText id="matricule" required="true" value="#{locationBean.location.idvehicule.matricule}" a:placeholder="Matricule"  styleClass="form-control" >
							<f:validateRequired />
							<f:ajax event="change" listener="#{locationBean.getVehicule()}" render=":frmlocationAdd:marque :frmlocationAdd:modele :frmlocationAdd:couleur :frmlocationAdd:prixjour frmlocationAdd:montantlocation" />
						</h:inputText>
					</div>
				</div>
				<div class="form-group row">
					<label for="marque" class="col-sm-2 col-form-label">Marque</label>
					<div class="col-sm-10">
						<h:inputText id="marque" required="true" value="#{locationBean.location.idvehicule.marque}"  styleClass="form-control"  a:placeholder="Marque" />
					</div>
				</div>
				<div class="form-group row">
					<label for="modele" class="col-sm-2 col-form-label">Modele</label>
					<div class="col-sm-10">
						<h:inputText id="modele" required="true" value="#{locationBean.location.idvehicule.modele}" a:placeholder="Modele"  styleClass="form-control" />
					</div>
				</div>
				<div class="form-group row">
					<label for="couleur" class="col-sm-2 col-form-label">Couleur</label>
					<div class="col-sm-10">
						<h:inputText id="couleur" a:type="color"  required="true" value="#{locationBean.location.idvehicule.couleur}" a:placeholder="Couleur" styleClass="form-control" />
					</div>
				</div>
				<div class="form-group row">
					<label for="prixjour" class="col-sm-2 col-form-label">Prix par jour</label>
					<div class="col-sm-10">
						<h:inputText id="prixjour" required="true" value="#{locationBean.location.idvehicule.prixjour}" onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;" a:placeholder="Prix par jour"  styleClass="form-control" />
					</div>
				</div>
			</fieldset>
			<legend>
				Information Location
			</legend>
			<fieldset>


				<div class="form-group row">
					<label for="date" class="col-sm-2 col-form-label">Date</label>
					<div class="col-sm-10">
						<!--<h:inputHidden value="#{locationBean.location.idclient}" id="idclient" />
						<h:inputHidden value="#{locationBean.location.idvehicule}" id="idvehicule" />-->
						<!--<h:inputText id="date" a:type="date"  required="true" value="#{locationBean.location.date}" a:placeholder="Date" styleClass="form-control" />-->
						<h:inputText id="date"  required="true" requiredMessage="La date est require" value="#{locationBean.location.date}"  styleClass="form-control">
							<f:convertDateTime type="date" pattern="dd/MM/yyyy" />
						</h:inputText>
					</div>
				</div>
				<!--<div class="form-group row">
					<label for="nbjour" class="col-sm-2 col-form-label">Nombre de jour</label>
					<div class="col-sm-10">
						<h:inputText id="nbjour" required="true" value="#{locationBean.location.nbjour}" onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;" a:placeholder="Nombre de jour"  styleClass="form-control" />
					</div>
				</div>-->
				<div class="form-group row text-center" style="text-align: center;margin: auto;display: inline-block">
					<h:outputText value="${locationBean.message}" id="message" style="color: red;font-size: 10px;text-align: center" />
				</div>
				<div class="form-group row">

					<label for="nbjour" class="col-sm-2 col-form-label">Nombre de jour</label>
					<div class="col-sm-10">
						<h:selectOneMenu id="nbjour" value="#{locationBean.location.nbjour}" styleClass="form-control">
							<f:ajax event="change" listener="#{locationBean.calculePrice()}" render="frmlocationAdd:montantlocation frmlocationAdd:message" />
							<f:selectItem itemValue="0"  itemLabel="Selectionner le nombre de jour"/>
							<f:selectItem itemValue="1"  itemLabel="1"/>
							<f:selectItem itemValue="2"  itemLabel="2"/>
							<f:selectItem itemValue="3"  itemLabel="3"/>
							<f:selectItem itemValue="4"  itemLabel="4"/>
							<f:selectItem itemValue="5"  itemLabel="5"/>
						</h:selectOneMenu>
					</div>
				</div>
				<div class="form-group row">
					<label for="montantlocation" class="col-sm-2 col-form-label">Montant location</label>
					<div class="col-sm-10">
						<h:inputText readonly="true" id="montantlocation" required="true" value="#{locationBean.location.montantlocation}" onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;" a:placeholder="Montant location"  styleClass="form-control" />
					</div>
				</div>
				<div class="form-group row">
					<label for="commentaire" class="col-sm-2 col-form-label">Commentaire</label>
					<div class="col-sm-10">
						<h:inputTextarea rows="5" id="commentaire" required="true" value="#{locationBean.location.commentaire}"  a:placeholder="Commentaire"  styleClass="form-control" />
					</div>
				</div>
				
			</fieldset>
			
			
			
			<div class="row text-center" style="width: 100% ; margin: auto">
				<h:commandButton action="#{locationBean.addLocation}" value="Ajouter" styleClass="btn btn-primary" style="margin: auto" />
			</div>

		</h:form>
		<h:messages />

		<hr/>

		<div class="row">
			<h:dataTable value = "#{locationBean.locations}" var = "location"
						 styleClass = "table table-striped table-hover">

				<h:column>
					<f:facet name = "header">Date</f:facet>
					#{location.date}
				</h:column>

				<h:column>
					<f:facet name = "header">Nombre de jour</f:facet>
					#{location.nbjour}
				</h:column>

				<h:column>
					<f:facet name = "header">Montant</f:facet>
					#{location.montantlocation}
				</h:column>

				<h:column>
					<f:facet name = "header">Commentaire</f:facet>
					#{location.commentaire}
				</h:column>
				<h:column>
					<f:facet name = "header">Action</f:facet>
					<h:form >
						<h:commandButton style="margin: 5px" styleClass="btn btn-primary btn-sm" action="#{locationBean.editLocation(location)}"  value="Editer"/>
						<h:commandButton style="margin: 5px" styleClass="btn btn-primary btn-sm" action="#{locationBean.deleteLocation(location)}"  value="Supprimer"/>
						<h:commandButton style="margin: 5px" styleClass="btn btn-primary btn-sm" action="#{locationBean.detailsLocation(location)}"  value="Details"/>
					</h:form>
				</h:column>
			</h:dataTable>

		</div>
	</div>
	<!--CONTENT-->


	<!--FOOTER JS-->
	<ui:insert name = "footer" >
		<ui:include src = "fragments/footer.xhtml" />
	</ui:insert>
	<!--FOOTER JS-->

	<h:outputScript>
		/*$("#frmlocationAdd:nbjour").on('change',function (e) {
			var montant =  (parseFloat($("#frmlocationAdd:prixjour").val()) || 0 ) * ( parseInt($("#frmlocationAdd:nbjour").val() ) || 0)
			$("#frmlocationAdd:montantlocation").val(montant)
		});*/
	</h:outputScript>
</h:body>
</html>